name: Deploy to GitHub Pages (DEPRECATED - Use ci-cd.yml)

# This workflow is disabled - use .github/workflows/ci-cd.yml instead
on:
  workflow_dispatch:  # Only allow manual trigger to prevent conflicts

jobs:
  build-and-deploy:
    if: false  # Disable this job
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Build
      run: |
        npm run build
        echo "Build completed, checking output..."
        ls -la
        if [ -d "dist" ]; then
          echo "dist folder exists:"
          ls -la dist/
        else
          echo "ERROR: dist folder not found!"
          exit 1
        fi

    - name: Setup Pages
      uses: actions/configure-pages@v4
      if: github.ref == 'refs/heads/main'

    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      if: github.ref == 'refs/heads/main'
      with:
        path: ./dist

    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
      if: github.ref == 'refs/heads/main'